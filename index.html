<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JS</title>

    <!-- Bootstrap and deps -->
    <link rel="stylesheet" type="text/css" href="libs/bootstrap.min.css">
    <script type="text/javascript" src="libs/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="libs/bootstrap.bundle.min.js"></script>

    <!-- Our scripts -->
    <script type="text/javascript" src="Doms/GenericField.js"></script>
    <script type="text/javascript" src="Doms/PhaseBlock.js"></script>
    <script type="text/javascript" src="formulas/Physical.js"></script>
    <script type="text/javascript" src="calc.js"></script>
    <script type="text/javascript" src="script.js"></script>

    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>


    <div id="phaseCountBlock">
        <input type="number" value="1" min="1" max="5">
    </div>


    <div id="oCapacitorBlock">
        <input type="text" placeholder="oCapacitorBlock">
    </div>
    
    <div id="thElBlock">
        <input type="text" placeholder="thElBlock">
    </div>
    
    <div id="sReferenceBlock">
        <input type="text" placeholder="sReferenceBlock">
    </div>
    
    <div id="eABlock">
        <input type="text" placeholder="eABlock">
    </div>
    
    <div id="yTCyBlock">
        <input type="text" placeholder="yTCyBlock">
    </div>
    
    <div id="nAnnualCyBlock">
        <input type="text" placeholder="nAnnualCyBlock">
    </div>
    
    <div id="yMechBlock">
        <input type="text" placeholder="yMechBlock">
    </div>
    
    <div id="placementBlock">
        <input type="text" placeholder="placementBlock">
    </div>
    
    <div id="ruggedisingBlock">
        <input type="text" placeholder="ruggedisingBlock">
    </div>
    
    <div id="sensitivityBlock">
        <input type="text" placeholder="sensitivityBlock">
    </div>


    <div id="phaseBlockContainer">

    </div>



    <div class="mt-4 mb-4 container">

        <!-- Phase count -->
        <div class="mb-4 phase-count-block">
            <div class="form-group">
                <label>Phase count</label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <button class="btn btn-outline-danger" type="button" data-decrement-input="phase-count-input">-</button>
                    </div>
                    <input id="phase-count-input" class="form-control phase-count-input one-field-input" type="text" value="1" min="1" max="5" step="1">
                    <div class="input-group-append">
                        <button class="btn btn-outline-success" type="button" data-increment-input="phase-count-input">+</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- One-field inputs -->
        <div class="mb-4 one-field-blocks-container">
            <div id="someVariableBlock" class="form-group">
                <label>Some variable</label>
                <div class="input-group">
                    <input class="form-control" data-input-type="number" pattern="^-?\d+(?:.\d+)?$">
                </div>
            </div>

            <div id="someVariableBlock" class="form-group">
                <label>Some variable 2</label>
                <div class="input-group">
                    <select class="custom-select">
                        <option value="1">Option one</option>
                        <option value="2">Option two</option>
                        <option value="3">Option three</option>
                    </select>
                </div>
            </div>

            <!-- Other blocks here (generate programmatically?) -->
        </div>

        <!-- Phase count dependent block -->
        <div class="phase-deps-container">
            <div id="phaseDepsBlock1" class="mb-4 phase-deps-block card card-body">
                <div id="someVariableBlock" class="form-group">
                    <label>Some phase dep variable</label>
                    <div class="input-group">
                        <input class="form-control" data-input-type="number" pattern="^-?\d+(?:.\d+)?$">
                    </div>
                </div>

                <div id="someVariableBlock" class="form-group">
                    <label>Some phase dep variable</label>
                    <div class="input-group">
                        <input class="form-control" data-input-type="number" pattern="^-?\d+(?:.\d+)?$">
                    </div>
                </div>
            </div>

            <div id="phaseDepsBlock2" class="phase-deps-block card card-body">
                <div id="someVariableBlock" class="form-group">
                    <label>Some phase dep variable</label>
                    <div class="input-group">
                        <input class="form-control" data-input-type="number" pattern="^-?\d+(?:.\d+)?$">
                    </div>
                </div>

                <div id="someVariableBlock" class="form-group">
                    <label>Some phase dep variable</label>
                    <div class="input-group">
                        <input class="form-control" data-input-type="number" pattern="^-?\d+(?:.\d+)?$">
                    </div>
                </div>
            </div>
        </div>

    </div>


    <button id="calculateButton">Calculate</button>



    <script type="text/javascript">

        // Set + and - buttons event handlers (around number inputs)

        document.querySelectorAll('[data-decrement-input]').forEach((elem) => {
            elem.addEventListener('click', (event) => {
                var inputId = event.target.getAttribute('data-decrement-input');
                var input = document.getElementById(inputId);

                var min = input.getAttribute('min');
                var max = input.getAttribute('max');
                var step = input.getAttribute('step') || 1;

                var newValue = (+input.value - +step);

                if (Number.isInteger(newValue) && newValue >= input.getAttribute('min') && newValue <= input.getAttribute('max')) {
                    input.value = newValue;
                } else {
                    input.value = input.getAttribute('min');
                }
            });
        });

        document.querySelectorAll('[data-increment-input]').forEach((elem) => {
            elem.addEventListener('click', (event) => {
                var inputId = event.target.getAttribute('data-increment-input');
                var input = document.getElementById(inputId);

                var min = input.getAttribute('min');
                var max = input.getAttribute('max');
                var step = input.getAttribute('step') || 1;

                var newValue = (+input.value + +step);

                if (Number.isInteger(newValue) && newValue >= input.getAttribute('min') && newValue <= input.getAttribute('max')) {
                    input.value = newValue;
                } else {
                    input.value = input.getAttribute('max');
                }
            });
        });
    </script>



</body>
</html>
